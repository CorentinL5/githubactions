name: Exercice Variables - Manuel

on:
  workflow_dispatch:
    inputs:
      couleur:
        description: "Couleur initiale"
        required: true
        default: "jaune"

env:
  MA_VARIABLE_PRENOM: "Alice"
  MA_VARIABLE_NOM: "Bob"
  MA_VARIABLE_MULTILIGNE: |
    Bonjour
    à tous
    !

jobs:
  demo:
    runs-on: ubuntu-latest

    env:
      COULEUR: ${{ inputs.couleur }}

    steps:
      - name: Afficher les variables globales
        run: |
          echo "Prénom : $MA_VARIABLE_PRENOM"
          echo "Nom : $MA_VARIABLE_NOM"
          echo "Message multilignes :"
          echo "$MA_VARIABLE_MULTILIGNE"

      - name: Variable issue du bouton
        run: echo "Couleur initiale : $COULEUR"

      - name: Modifier dynamiquement la variable
        run: |
          echo "COULEUR=vert" >> $GITHUB_ENV

      - name: Vérifier la variable dynamique
        run: echo "Couleur après modification : $COULEUR"

      - name: Définir une variable de sortie
        id: monStep
        run: |
          echo "RESULTAT=succès" >> $GITHUB_OUTPUT

      - name: Utiliser la variable de sortie
        run: echo "Résultat : ${{ steps.monStep.outputs.RESULTAT }}"

      - name: Variables GitHub prédéfinies
        run: |
          echo "Repository : $GITHUB_REPOSITORY"
          echo "Utilisateur : $GITHUB_ACTOR"
          echo "Commit SHA : $GITHUB_SHA"
